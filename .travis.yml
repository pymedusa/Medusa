language: python
python:
  - 2.7.10
sudo: false
branches:
  except:
    - master
install:
  - pip install --upgrade pip
  - pip install --upgrade tox
  - pip install dredd_hooks
  - pip install PyYAML
  - pip install six
  - nvm install node
  - nvm use node
  - 'curl -o- -L https://yarnpkg.com/install.sh | bash'
  - 'export PATH="$HOME/.yarn/bin:$PATH" && yarn install && cd vue && yarn install && cd ..'
script:
  - tox -v --recreate
  - 'cd vue && yarn test && cd ..'
  - yarn test
cache:
  yarn: true
  directories:
    - $HOME/.cache/pip
    - node_modules
after_failure:
  - cat ./dredd/data/Logs/application.log
