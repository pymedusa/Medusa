!function e(t,o,i){function l(a,r){if(!o[a]){if(!t[a]){var s="function"==typeof require&&require;if(!r&&s)return s(a,!0);if(n)return n(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){var o=t[a][1][e];return l(o||e)},u,u.exports,e,t,o,i)}return o[a].exports}for(var n="function"==typeof require&&require,a=0;a<i.length;a++)l(i[a]);return l}({1:[function(e,t,o){!function(e){"use strict";e.Browser={defaults:{title:"Choose Directory",url:"browser/",autocompleteURL:"browser/complete",includeFiles:0,showBrowseButton:!0}};let t,o,i=null;const l=(n,a,r)=>{o!==n&&(o=n,i&&i.abort(),t.dialog("option","dialogClass","browserDialog busy"),t.dialog("option","closeText",""),i=e.getJSON(a,{path:n,includeFiles:r},i=>{t.empty();const n=i[0];let s=null,c=0;i=e.grep(i,()=>0!=c++),e('<input type="text" class="form-control input-sm">').val(n.currentPath).on("keypress",e=>{13===e.which&&l(e.target.value,a,r)}).appendTo(t).fileBrowser({showBrowseButton:!1}).on("autocompleteselect",(e,t)=>{l(t.item.value,a,r)});const u=e("<ul>").appendTo(t);e.each(i,(t,i)=>{s=e('<a href="javascript:void(0)">').on("click",()=>{i.isFile?(o=i.path,e('.browserDialog .ui-button:contains("Ok")').click()):l(i.path,a,r)}).text(i.name),i.isFile?s.prepend('<span class="ui-icon ui-icon-blank"></span>'):s.prepend('<span class="ui-icon ui-icon-folder-collapsed"></span>').on("mouseenter",function(){e("span",this).addClass("ui-icon-folder-open")}).on("mouseleave",function(){e("span",this).removeClass("ui-icon-folder-open")}),s.appendTo(u)}),e("a",u).wrap('<li class="ui-state-default ui-corner-all">'),t.dialog("option","dialogClass","browserDialog")}))};e.fn.nFileBrowser=function(i,n){n=e.extend({},e.Browser.defaults,n),t?t.dialog("option","title",n.title):t=e('<div class="fileBrowserDialog" style="display:hidden"></div>').appendTo("body").dialog({dialogClass:"browserDialog",title:n.title,position:{my:"center top",at:"center top+60",of:window},minWidth:Math.min(e(document).width()-80,650),height:Math.min(e(document).height()-80,e(window).height()-80),maxHeight:Math.min(e(document).height()-80,e(window).height()-80),maxWidth:e(document).width()-80,modal:!0,autoOpen:!1}),t.dialog("option","buttons",[{text:"Ok",class:"btn",click(){i(o,n),e(this).dialog("close")}},{text:"Cancel",class:"btn",click(){e(this).dialog("close")}}]);let a="";return n.initialDir&&(a=n.initialDir),l(a,n.url,n.includeFiles),t.dialog("open"),!1},e.fn.fileBrowser=function(t){if((t=e.extend({},e.Browser.defaults,t)).field=e(this),t.field.autocomplete&&t.autocompleteURL){let o="";t.field.autocomplete({position:{my:"top",at:"bottom",collision:"flipfit"},source(i,l){o=e.ui.autocomplete.escapeRegex(i.term,t.includeFiles),e.ajax({url:t.autocompleteURL,data:i,dataType:"json"}).done(t=>{const i=new RegExp("^"+o,"i"),n=e.grep(t,e=>i.test(e));l(n)})},open(){e(".ui-autocomplete li.ui-menu-item a").removeClass("ui-corner-all")}}).data("ui-autocomplete")._renderItem=function(t,i){let l=i.label;const n=new RegExp("(?![^&;]+;)(?!<[^<>]*)("+o+")(?![^<>]*>)(?![^&;]+;)","gi");return l=l.replace(n,e=>"<b>"+e+"</b>"),e("<li></li>").data("ui-autocomplete-item",i).append('<a class="nowrap">'+l+"</a>").appendTo(t)}}let o,i=!1;try{i=Boolean(localStorage.getItem)}catch(e){console.log(e)}i&&t.key&&(o=localStorage["fileBrowser-"+t.key]),t.key&&0===t.field.val().length&&o&&t.field.val(o);const l=(e,t)=>{t.field.val(e),i&&t.key&&(localStorage["fileBrowser-"+t.key]=e)};return t.field.addClass("fileBrowserField"),t.showBrowseButton&&t.field.after(e('<input type="button" value="Browse&hellip;" class="btn btn-inline fileBrowser">').on("click",function(){const i=t.field.val()||t.key&&o||"",n=e.extend({},t,{initialDir:i});return e(this).nFileBrowser(l,n),!1})),t.field}}($)},{}]},{},[1]);
//# sourceMappingURL=browser.js.map
