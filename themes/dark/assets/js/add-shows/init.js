MEDUSA.addShows.init=function(){$("#tabs").tabs({collapsible:!0,selected:MEDUSA.config.layout.sortArticle?-1:0});const e=new LazyLoad({threshold:500});$.initRemoteShowGrid=function(){e.update(),e.handleScroll(),$("#showsort").val("original"),$("#showsortdirection").val("asc"),$("#showsort").on("change",(function(){let e;switch(this.value){case"original":e="original-order";break;case"rating":$("#container").isotope({sortBy:"random"}),e="rating";break;case"rating_votes":e=["rating","votes"];break;case"votes":e="votes";break;default:e="name"}$("#container").isotope({sortBy:e})})),$(document.body).on("change","#rootDirs",(()=>{$.rootDirCheck()})),$("#showsortdirection").on("change",(function(){$("#container").isotope({sortAscending:"asc"===this.value})})),$("#container").isotope({sortBy:"original-order",layoutMode:"fitRows",getSortData:{name(e){const t=$(e).attr("data-name")||"";return(MEDUSA.config.layout.sortArticle?t:t.replace(/^((?:the|a|an)\s)/i,"")).toLowerCase()},rating:"[data-rating] parseInt",votes:"[data-votes] parseInt"}}).on("layoutComplete arrangeComplete removeComplete",(()=>{e.update(),e.handleScroll()}))},$.fn.loadRemoteShows=function(t,o,a){$(this).html('<img id="searchingAnime" src="images/loading32'+MEDUSA.config.layout.themeSpinner+'.gif" height="32" width="32" />&nbsp;'+o),$(this).load(t+" #container",(function(t,o){"error"===o?$(this).empty().html(a):($.initRemoteShowGrid(),e.update(),e.handleScroll())}))},$.initBlackListShowById=function(){$(document.body).on("click","button[data-blacklist-show]",(function(e){return e.preventDefault(),$(this).is(":disabled")||($(this).html("Blacklisted").prop("disabled",!0),$(this).parent().find("button[data-add-show]").prop("disabled",!0),$.get("addShows/addShowToBlacklist?seriesid="+$(this).attr("data-indexer-id"))),!1}))},$.initAddShowById=function(){$(document.body).on("click","button[data-add-show]",(function(e){if(e.preventDefault(),$(this).is(":disabled"))return!1;$(this).html("Added").prop("disabled",!0),$(this).parent().find("button[data-blacklist-show]").prop("disabled",!0);const t=[],o=[];$('select[name="allowed_qualities"] option:selected').each(((e,o)=>{t.push($(o).val())})),$('select[name="preferred_qualities"] option:selected').each(((e,t)=>{o.push($(t).val())}));const a=$("#configure_show_options").prop("checked");return $.get("addShows/addShowByID?showslug="+$(this).attr("data-indexer")+$(this).attr("data-indexer-id"),{root_dir:$("#rootDirs option:selected").val(),configure_show_options:a,show_name:$(this).attr("data-show-name"),quality_preset:$('select[name="quality_preset"]').val(),default_status:$("#statusSelect").val(),any_qualities:t.join(","),best_qualities:o.join(","),season_folders:$("#season_folders").prop("checked"),subtitles:$("#subtitles").prop("checked"),anime:$("#anime").prop("checked"),scene:$("#scene").prop("checked"),default_status_after:$("#statusSelectAfter").val()}),!1}))},$.updateBlackWhiteList=function(e){$("#white").children().remove(),$("#black").children().remove(),$("#pool").children().remove(),$("#anime").prop("checked")&&e?($("#blackwhitelist").show(),e&&$.getJSON("home/fetch_releasegroups",{series_name:e},(e=>{"success"===e.result&&$.each(e.groups,((e,t)=>{const o=$("<option>");o.prop("value",t.name),o.html(t.name+" | "+t.rating+" | "+t.range),o.appendTo("#pool")}))}))):$("#blackwhitelist").hide()},$.rootDirCheck=function(){0===$("#rootDirs option:selected").length?($("button[data-add-show]").prop("disabled",!0),$("#configure_show_options").is(":checked")||($("#configure_show_options").prop("checked",!0),$("#content_configure_show_options").fadeIn("fast","linear")),0===$("#rootDirAlert").length?$("#content-row").before('<div id="rootDirAlert"><div class="text-center"><div class="alert alert-danger upgrade-notification hidden-print role="alert"><strong>ERROR!</strong> Unable to add recommended shows.  Please set a default directory first.</div></div></div>'):$("#rootDirAlert").show()):($("#rootDirAlert").hide(),$("button[data-add-show]").prop("disabled",!1))}};