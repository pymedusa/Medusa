$(document).ready((()=>{$("[data-action=api-call]").on("click",(function(){const e=$("[data-command="+$(this).data("command-name")+"]"),a=$("#option-profile").is(":checked"),t=$(this).data("target"),o=$(this).data("time");let n=$("#"+$(this).data("base-url")).text();const s=$(this).data("url");$.each(e,((e,a)=>{const t=$(a).attr("name");let o=$(a).val();void 0!==t&&void 0!==o&&t!==o&&o&&($.isArray(o)&&(o=o.join("|")),n+="&"+t+"="+o)})),a&&(n+="&profile=1");const i=(new Date).getTime();$.get(n.replace("/api/","api/"),((e,a,d)=>{const c=(new Date).getTime()-i,p=$("#option-jsonp").is(":checked"),r=d.getResponseHeader("content-type")||"",l=$(t);if($(o).text(c+"ms"),$(s).text(n+(p?"&jsonp=foo":"")),"image/"===r.slice(0,6))l.html($("<img/>").prop("src",n));else{const a=JSON.stringify(e,null,4);p?l.text("foo("+a+");"):l.text(a)}l.parents(".result-wrapper").removeClass("hidden")}))})),$("[data-action=clear-result]").on("click",(function(){$($(this).data("target")).html("").parents(".result-wrapper").addClass("hidden")})),$("[data-action=update-episodes").on("change",(function(){const e=$(this).data("command"),a=$("[data-command="+e+"][name=episode]"),t=$(this).val(),o=$("[data-command="+e+"][name=indexerid]").val();if(void 0!==a){a.removeClass("hidden"),a.find("option:gt(0)").remove();for(const e in episodes[o][t])({}).hasOwnProperty.call(episodes[o][t],e)&&a.append($("<option>",{value:episodes[o][t][e],label:"Episode "+episodes[o][t][e]}))}})),$("[data-action=update-seasons").on("change",(function(){const e=$(this).data("command"),a=$("[data-command="+e+"][name=season]"),t=$(this).val();if(void 0!==a){a.removeClass("hidden"),a.find("option:gt(0)").remove();for(const e in episodes[t])({}).hasOwnProperty.call(episodes[t],e)&&a.append($("<option>",{value:e,label:0===e?"Specials":"Season "+e}))}})),$("#command-search").typeahead({source:commands}),$("#command-search").on("change",(function(){const e=$(this).typeahead("getActive");if(e){const a=e.replace(".","-");$('[href="#command-'+a+'"]').click()}})),document.body.removeAttribute("style")}));