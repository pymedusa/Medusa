{"version":3,"names":[],"mappings":"","sources":["js/mass-update.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\n$(document).ready(function () {\n    $(document.body).on('click', '.submitMassEdit', function () {\n        var editArr = [];\n\n        $('.editCheck').each(function (index, element) {\n            if (element.checked === true) {\n                editArr.push('' + $(element).attr('data-indexer-name') + $(element).attr('data-series-id'));\n            }\n        });\n\n        if (editArr.length === 0) {\n            return;\n        }\n\n        var submitForm = $('<form method=\\'post\\' action=\\'' + $('base').attr('href') + 'manage/massEdit\\'>' + '<input type=\\'hidden\\' name=\\'toEdit\\' value=\\'' + editArr.join('|') + '\\'/>' + '</form>');\n        submitForm.appendTo('body');\n\n        submitForm.submit();\n    });\n\n    $(document.body).on('click', '.submitMassUpdate', function () {\n        var updateArr = [];\n        var refreshArr = [];\n        var renameArr = [];\n        var subtitleArr = [];\n        var deleteArr = [];\n        var removeArr = [];\n        var metadataArr = [];\n        var imageUpdateArr = [];\n\n        $('.updateCheck').each(function (index, element) {\n            if (element.checked === true) {\n                updateArr.push('' + $(element).attr('data-indexer-name') + $(element).attr('data-series-id'));\n            }\n        });\n\n        $('.refreshCheck').each(function (index, element) {\n            if (element.checked === true) {\n                refreshArr.push('' + $(element).attr('data-indexer-name') + $(element).attr('data-series-id'));\n            }\n        });\n\n        $('.renameCheck').each(function (index, element) {\n            if (element.checked === true) {\n                renameArr.push('' + $(element).attr('data-indexer-name') + $(element).attr('data-series-id'));\n            }\n        });\n\n        $('.subtitleCheck').each(function (index, element) {\n            if (element.checked === true) {\n                subtitleArr.push('' + $(element).attr('data-indexer-name') + $(element).attr('data-series-id'));\n            }\n        });\n\n        $('.removeCheck').each(function (index, element) {\n            if (element.checked === true) {\n                removeArr.push('' + $(element).attr('data-indexer-name') + $(element).attr('data-series-id'));\n            }\n        });\n\n        $('.imageCheck').each(function (index, element) {\n            if (element.checked === true) {\n                imageUpdateArr.push('' + $(element).attr('data-indexer-name') + $(element).attr('data-series-id'));\n            }\n        });\n\n        var deleteCount = 0;\n\n        $('.deleteCheck').each(function (index, element) {\n            if (element.checked === true) {\n                deleteCount++;\n            }\n        });\n\n        var totalCount = [].concat.apply([], [updateArr, refreshArr, renameArr, subtitleArr, deleteArr, removeArr, metadataArr, imageUpdateArr]).length; // eslint-disable-line no-useless-call\n\n        if (deleteCount >= 1) {\n            $.confirm({\n                title: 'Delete Shows',\n                text: 'You have selected to delete ' + deleteCount + ' show(s).  Are you sure you wish to continue? All files will be removed from your system.',\n                confirmButton: 'Yes',\n                cancelButton: 'Cancel',\n                dialogClass: 'modal-dialog',\n                post: false,\n                confirm: function confirm() {\n                    $('.deleteCheck').each(function (index, element) {\n                        if (element.checked === true) {\n                            deleteArr.push('' + $(element).attr('data-indexer-name') + $(element).attr('data-series-id'));\n                        }\n                    });\n                    if (totalCount === 0) {\n                        return false;\n                    }\n                    var params = $.param({\n                        toUpdate: updateArr.join('|'),\n                        toRefresh: refreshArr.join('|'),\n                        toRename: renameArr.join('|'),\n                        toSubtitle: subtitleArr.join('|'),\n                        toDelete: deleteArr.join('|'),\n                        toRemove: removeArr.join('|'),\n                        toMetadata: metadataArr.join('|'),\n                        toImageUpdate: imageUpdateArr.join('|')\n                    });\n\n                    window.location.href = $('base').attr('href') + 'manage/massUpdate?' + params;\n                }\n            });\n        }\n\n        if (totalCount === 0) {\n            return false;\n        }\n        if (updateArr.length + refreshArr.length + renameArr.length + subtitleArr.length + deleteArr.length + removeArr.length + metadataArr.length + imageUpdateArr.length === 0) {\n            return false;\n        }\n        var url = $('base').attr('href') + 'manage/massUpdate';\n        var params = 'toUpdate=' + updateArr.join('|') + '&toRefresh=' + refreshArr.join('|') + '&toRename=' + renameArr.join('|') + '&toSubtitle=' + subtitleArr.join('|') + '&toDelete=' + deleteArr.join('|') + '&toRemove=' + removeArr.join('|') + '&toMetadata=' + metadataArr.join('|') + '&toImageUpdate=' + imageUpdateArr.join('|');\n        $.post(url, params, function () {\n            location.reload(true);\n        });\n    });\n\n    ['.editCheck', '.updateCheck', '.refreshCheck', '.renameCheck', '.deleteCheck', '.removeCheck', '.imageCheck'].forEach(function (name) {\n        var lastCheck = null;\n\n        $(document.body).on('click', name, function (event) {\n            if (!lastCheck || !event.shiftKey) {\n                lastCheck = event.currentTarget;\n                return;\n            }\n\n            var check = event.currentTarget;\n            var found = 0;\n\n            $(name).each(function (index, element) {\n                if (found === 1) {\n                    if (!element.disabled) {\n                        element.checked = lastCheck.checked;\n                    }\n                }\n                if (found === 2) {\n                    return false;\n                }\n                if (element === check || element === lastCheck) {\n                    found++;\n                }\n            });\n        });\n    });\n});\n\n},{}]},{},[1]);\n"],"file":"mass-update.js"}